<nz-input-group nzSize="large" [nzPrefix]="inputValue ? inputAddButton: inputPlusIcon" [nzSuffix]="inputClearTpl">
  <input type="text" nz-input [(ngModel)]="inputValue" placeholder="Add new Todo"
    (keyup.enter)="createTodoModal.openModal()" />
  <ng-template #inputAddButton>
    <button nz-button nzType="primary" (click)="createTodoModal.openModal()">Add</button>
  </ng-template>
  <ng-template #inputPlusIcon>
    <span nz-icon nzType="plus" nzTheme="outline"></span>
  </ng-template>
  <ng-template #inputClearTpl>
    <span nz-icon nzTheme="fill" nzType="close-circle" *ngIf="inputValue" (click)="inputValue = null"></span>
  </ng-template>
  <app-todo-create [title]="inputValue || ''" #createTodoModal></app-todo-create>
</nz-input-group>

<div class="board-wrapper">
  <div cdkDropList id="todo" #todoList="cdkDropList" [cdkDropListData]="todo | async"
    [cdkDropListConnectedTo]="[doneList, inProgressList]" class="board-colons-todo" (cdkDropListDropped)="drop($event)">
    <h2>
      <span>
        Todo
        <button nz-button nzType="text" nzShape="circle" (click)="changeFilterOrder('todo')">
          <span nz-icon [nzType]="(sortAllTodo.order === 'ascend') ? 'sort-ascending' : 'sort-descending'"
            nzTheme="outline"></span>
        </button>
      </span>
      <div>
        <label nz-checkbox [(ngModel)]="checkAllTodo" (nzCheckedChange)="todoAction('selectAll','todo')">Select
          all</label>
        <button nz-button nzType="text" nzShape="circle" nz-dropdown [nzDropdownMenu]="todoMenu">
          <span nz-icon nzType="menu"></span>
        </button>
      </div>
    </h2>
    <ng-container *ngFor="let item of todo | async | sortTodo:sortAllTodo.order:sortAllTodo.filter; let i = index">
      <app-todo-item collectionName="todo" cdkDrag [title]="item.title" [todoItem]="item">
        <label nz-checkbox [(ngModel)]="item.checked"></label>
      </app-todo-item>
    </ng-container>
  </div>
  <nz-divider></nz-divider>

  <div cdkDropList id="inProgress" #inProgressList="cdkDropList" [cdkDropListData]="inProgress | async"
    [cdkDropListConnectedTo]="[doneList, todoList]" class="board-colons-inProgress" (cdkDropListDropped)="drop($event)">
    <h2>
      <span>
        In Progress
        <button nz-button nzType="text" nzShape="circle" (click)="changeFilterOrder('inProgress')">
          <span nz-icon [nzType]="(sortAllInProgress.order === 'ascend') ? 'sort-ascending' : 'sort-descending'"
            nzTheme="outline"></span>
        </button>
      </span>
      <div>
        <label nz-checkbox [(ngModel)]="checkAllInProgress"
          (nzCheckedChange)="todoAction('selectAll','inProgress')">Select
          all</label>
        <button nz-button nzType="text" nzShape="circle" nz-dropdown [nzDropdownMenu]="inProgressMenu">
          <span nz-icon nzType="menu"></span>
        </button>
      </div>
    </h2>
    <ng-container
      *ngFor="let item of inProgress | async | sortTodo:sortAllInProgress.order:sortAllInProgress.filter; let i = index">
      <app-todo-item collectionName="inProgress" cdkDrag [title]="item.title" [todoItem]="item">
        <label nz-checkbox [(ngModel)]="item.checked"></label>
      </app-todo-item>
    </ng-container>
  </div>
  <nz-divider></nz-divider>

  <div cdkDropList id="done" #doneList="cdkDropList" [cdkDropListData]="done | async"
    [cdkDropListConnectedTo]="[todoList, inProgressList]" class="example-list" class="board-colons-done"
    (cdkDropListDropped)="drop($event)">
    <h2>
      <span>
        Done
        <button nz-button nzType="text" nzShape="circle" (click)="changeFilterOrder('done')">
          <span nz-icon [nzType]="(sortAllDone.order === 'ascend') ? 'sort-ascending' : 'sort-descending'"
            nzTheme="outline"></span>
        </button>
      </span>
      <div>
        <label nz-checkbox [(ngModel)]="checkAllDone" (nzCheckedChange)="todoAction('selectAll','done')">Select
          all</label>
        <button nz-button nzType="text" nzShape="circle" nz-dropdown [nzDropdownMenu]="doneMenu">
          <span nz-icon nzType="menu"></span>
        </button>
      </div>
    </h2>
    <ng-container *ngFor="let item of done | async | sortTodo:sortAllDone.order:sortAllDone.filter; let i = index">
      <app-todo-item collectionName="done" cdkDrag [title]="item.title" [todoItem]="item">
        <label nz-checkbox [(ngModel)]="item.checked"></label>
      </app-todo-item>
    </ng-container>
  </div>
  <nz-divider></nz-divider>
</div>

<nz-dropdown-menu #todoMenu="nzDropdownMenu">
  <ul nz-menu nzSelectable>
    <li nz-menu-item (click)="todoAction('moveSelected','todo', 'inProgress')">Selected to InProgress</li>
    <li nz-menu-item (click)="todoAction('moveSelected','todo', 'done')">Selected to Done</li>
    <li nz-menu-item (click)="todoAction('deleteSelected','todo')">Delete selected</li>
  </ul>
</nz-dropdown-menu>

<nz-dropdown-menu #inProgressMenu="nzDropdownMenu">
  <ul nz-menu nzSelectable>
    <li nz-menu-item (click)="todoAction('moveSelected','inProgress', 'todo')">Selected to Todo</li>
    <li nz-menu-item (click)="todoAction('moveSelected','inProgress', 'done')">Selected to Done</li>
    <li nz-menu-item (click)="todoAction('deleteSelected','inProgress')">Delete selected</li>
  </ul>
</nz-dropdown-menu>

<nz-dropdown-menu #doneMenu="nzDropdownMenu">
  <ul nz-menu nzSelectable>
    <li nz-menu-item (click)="todoAction('moveSelected','done', 'todo')">Selected to Todo</li>
    <li nz-menu-item (click)="todoAction('moveSelected','done', 'inProgress')">Selected to InProgress</li>
    <li nz-menu-item (click)="todoAction('deleteSelected','done')">Delete selected</li>
  </ul>
</nz-dropdown-menu>