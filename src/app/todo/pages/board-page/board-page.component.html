<app-board-input></app-board-input>

<div class="board-wrapper">
  <div cdkDropList id="todo" #todoList="cdkDropList" [cdkDropListData]="todo | async"
    [cdkDropListConnectedTo]="[doneList, inProgressList]" class="board-colons-todo" (cdkDropListDropped)="drop($event)">
    <h2>
      <span>
        Todo
        <button nz-button nzType="text" nzShape="circle" (click)="changeFilterOrder(sortAllTodo)">
          <span nz-icon [nzType]="(sortAllTodo.order === 'ascend') ? 'sort-ascending' : 'sort-descending'"
            nzTheme="outline"></span>
        </button>
      </span>
      <div>
        <label nz-checkbox [(ngModel)]="checkAllTodo"
          (nzCheckedChange)="doActionWithTodo(todo, checkAllTodo, action.selectAll, collectionName.todo)">Select
          all</label>
        <button nz-button nzType="text" nzShape="circle" nz-dropdown [nzDropdownMenu]="todoMenu">
          <span nz-icon nzType="menu"></span>
        </button>
      </div>
    </h2>
    <ng-container *ngFor="let item of todo | async | sortTodo:sortAllTodo.order:sortAllTodo.filter; let i = index">
      <app-todo-item [checkAll]="checkAllTodo" [collectionName]="collectionName.todo" cdkDrag [title]="item.title"
        [todoItem]="item">
        <label nz-checkbox [(ngModel)]="item.checked" (nzCheckedChange)="checkTodo(collectionName.todo, item)"></label>
      </app-todo-item>
    </ng-container>
  </div>
  <nz-divider></nz-divider>

  <div cdkDropList id="inProgress" #inProgressList="cdkDropList" [cdkDropListData]="inProgress | async"
    [cdkDropListConnectedTo]="[doneList, todoList]" class="board-colons-inProgress" (cdkDropListDropped)="drop($event)">
    <h2>
      <span>
        In Progress
        <button nz-button nzType="text" nzShape="circle" (click)="changeFilterOrder(sortAllInProgress)">
          <span nz-icon [nzType]="(sortAllInProgress.order === 'ascend') ? 'sort-ascending' : 'sort-descending'"
            nzTheme="outline"></span>
        </button>
      </span>
      <div>
        <label nz-checkbox [(ngModel)]="checkAllInProgress"
          (nzCheckedChange)="doActionWithTodo(inProgress, checkAllInProgress, action.selectAll,collectionName.inProgress)">Select
          all</label>
        <button nz-button nzType="text" nzShape="circle" nz-dropdown [nzDropdownMenu]="inProgressMenu">
          <span nz-icon nzType="menu"></span>
        </button>
      </div>
    </h2>
    <ng-container
      *ngFor="let item of inProgress | async | sortTodo:sortAllInProgress.order:sortAllInProgress.filter; let i = index">
      <app-todo-item [checkAll]="checkAllInProgress" [collectionName]="collectionName.inProgress" cdkDrag
        [title]="item.title" [todoItem]="item">
        <label nz-checkbox [(ngModel)]="item.checked"
          (nzCheckedChange)="checkTodo(collectionName.inProgress, item)"></label>
      </app-todo-item>
    </ng-container>
  </div>
  <nz-divider></nz-divider>

  <div cdkDropList id="done" #doneList="cdkDropList" [cdkDropListData]="done | async"
    [cdkDropListConnectedTo]="[todoList, inProgressList]" class="example-list" class="board-colons-done"
    (cdkDropListDropped)="drop($event)">
    <h2>
      <span>
        Done
        <button nz-button nzType="text" nzShape="circle" (click)="changeFilterOrder(sortAllDone)">
          <span nz-icon [nzType]="(sortAllDone.order === 'ascend') ? 'sort-ascending' : 'sort-descending'"
            nzTheme="outline"></span>
        </button>
      </span>
      <div>
        <label nz-checkbox [(ngModel)]="checkAllDone"
          (nzCheckedChange)="doActionWithTodo(done, checkAllDone, action.selectAll,collectionName.done)">Select
          all</label>
        <button nz-button nzType="text" nzShape="circle" nz-dropdown [nzDropdownMenu]="doneMenu">
          <span nz-icon nzType="menu"></span>
        </button>
      </div>
    </h2>
    <ng-container *ngFor="let item of done | async | sortTodo:sortAllDone.order:sortAllDone.filter; let i = index">
      <app-todo-item [checkAll]="checkAllDone" [collectionName]="collectionName.done" cdkDrag [title]="item.title"
        [todoItem]="item">
        <label nz-checkbox [(ngModel)]="item.checked" (nzCheckedChange)="checkTodo(collectionName.done, item)"></label>
      </app-todo-item>
    </ng-container>
  </div>
  <nz-divider></nz-divider>
</div>

<nz-dropdown-menu #todoMenu="nzDropdownMenu">
  <ul nz-menu nzSelectable>
    <li nz-menu-item
      (click)="doActionWithTodo(todo, checkAllTodo, action.moveSelected, collectionName.todo, collectionName.inProgress)">
      Move
      selected to
      In
      Progress</li>
    <li nz-menu-item
      (click)="doActionWithTodo(todo, checkAllTodo, action.moveSelected,collectionName.todo, collectionName.done)">Move
      selected to Done
    </li>
    <li nz-menu-item (click)="doActionWithTodo(todo, checkAllTodo, action.deleteSelected, collectionName.todo)">Delete
      selected
    </li>
  </ul>
</nz-dropdown-menu>

<nz-dropdown-menu #inProgressMenu="nzDropdownMenu">
  <ul nz-menu nzSelectable>
    <li nz-menu-item
      (click)="doActionWithTodo(inProgress, checkAllInProgress, action.moveSelected, collectionName.inProgress, collectionName.todo)">
      Move
      selected to Todo</li>
    <li nz-menu-item
      (click)="doActionWithTodo(inProgress, checkAllInProgress, action.moveSelected,collectionName.inProgress, collectionName.done)">
      Move
      selected to Done</li>
    <li nz-menu-item
      (click)="doActionWithTodo(inProgress, checkAllInProgress, action.deleteSelected,collectionName.inProgress)">Delete
      selected
    </li>
  </ul>
</nz-dropdown-menu>

<nz-dropdown-menu #doneMenu="nzDropdownMenu">
  <ul nz-menu nzSelectable>
    <li nz-menu-item
      (click)="doActionWithTodo(done, checkAllDone, action.moveSelected,collectionName.done, collectionName.todo)">Move
      selected to Todo
    </li>
    <li nz-menu-item
      (click)="doActionWithTodo(done, checkAllDone, action.moveSelected,collectionName.done, collectionName.inProgress)">
      Move
      selected
      to In
      Progress</li>
    <li nz-menu-item (click)="doActionWithTodo(done, checkAllDone, action.deleteSelected,collectionName.done)">Delete
      selected</li>
  </ul>
</nz-dropdown-menu>